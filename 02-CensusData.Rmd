## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
library(tidycensus)
library(tidyverse)
library(stargazer)
library(dplyr)
library(RColorBrewer)
library(rgdal)
library(grid)
library(gridExtra)
library(htmlTable)

#In this section, we will start to observe what the important variables are in the ACS

```
```{r}
variables <- load_variables(2016, "acs5", cache = TRUE)
distinctvariables<-variables %>%
  distinct(concept)

# Based on the overview of this, there are some variables that might be important

# SEX BY AGE BY EDUCATIONAL ATTAINMENT FOR THE POPULATION 18 YEARS AND OVER

#B15001 is the code that we would use for this

## Sex Broken up to Male, Female (2)
## AGE Broken up to 18-24, 25-34, 35-44, 45-64, 65+, (5)
## Educational Attainment Broken up to less than diploma (no diploma), finish hs, Some college, associates, Bachelor, Graduate (6)



# EDUCATIONAL ATTAINMENT BY EMPLOYMENT STATUS FOR THE POPULATION 25 TO 64 YEARS


# SEX BY EDUCATIONAL ATTAINMENT FOR THE POPULATION 25 YEARS AND OVER (BLACK OR AFRICAN AMERICAN ALONE). There are other variables for other

# Age, Household Income and Ethnicity (AGE OF HOUSEHOLDER BY HOUSEHOLD INCOME IN THE PAST 12 MONTHS (IN 2016 INFLATION-ADJUSTED DOLLARS)))

# AGE (Under 25, 25-44, 45-64, 65+   4 cases)
# Income (Less 10K, 10-15, 15-20, 20-25, 25-30, 30-35, etc)

#Now that we have these variables accounted for, we may remove them. 

```

```{r}

#STATEACSGIS <- get_acs(
#  geography = "state",
#  variables = c("B01001_007"),
#  geometry = TRUE,
#  keep_geo_vars = TRUE
#) %>%
#  select(GEOID,
#    stFIPS = STATEFP,
#    filler = estimate,
#    geometry
#  )
#This is the remaineder of some code chunk I once thought was necessary. I know realize it is not. 

STATEACSTOTALVOTEPOP <- get_acs(
  geography = "state",
  variables = c("B01003_001", "B01001_003","B01001_004","B01001_005","B01001_006","B01001_027","B01001_028","B01001_029","B01001_030"),
  geometry = TRUE,
  keep_geo_vars=TRUE
) %>%
  select(-moe) %>%
  spread(variable, estimate) %>%
  mutate(TOTALVOTINGPOP=B01003_001-B01001_003-B01001_004-B01001_005-B01001_006-B01001_027-B01001_028-B01001_029-B01001_030) %>%   #Here, we are taking the whole population less the parts of the population that are under 18 years old. We want to get an understanding of the size of the voting population of this area
  select(-B01003_001,-B01001_003,-B01001_004,-B01001_005,-B01001_006,-B01001_027,-B01001_028,-B01001_029,-B01001_030)

#B01003_001 This is a count of the total population. Therefore, it might be important to include. 

STATEACSSTRATAS<- get_acs(
  geography = "state",
  variables = c("B15001_004","B15001_005","B15001_006","B15001_007","B15001_008","B15001_009","B15001_010","B15001_012","B15001_013","B15001_014","B15001_015","B15001_016","B15001_017","B15001_018","B15001_020","B15001_021","B15001_022","B15001_023","B15001_024","B15001_025","B15001_026","B15001_028","B15001_029","B15001_030","B15001_031","B15001_032","B15001_033","B15001_034","B15001_036","B15001_037","B15001_038","B15001_039","B15001_040","B15001_041","B15001_042","B15001_045","B15001_046","B15001_047","B15001_048","B15001_049","B15001_050","B15001_051","B15001_053","B15001_054","B15001_055","B15001_056","B15001_057","B15001_058","B15001_059","B15001_061","B15001_062","B15001_063","B15001_064","B15001_065","B15001_066","B15001_067","B15001_069","B15001_070","B15001_071","B15001_072","B15001_073","B15001_074","B15001_075","B15001_077","B15001_078","B15001_079","B15001_080","B15001_081","B15001_082","B15001_083"),
  geometry = FALSE
) %>%
  select(-moe) %>%
  spread(variable, estimate)

```

```{r}
#This is all county stuff. Its probably not going to be important
#ACSCOUNTYGIS <- get_acs(
#  geography = "county",
#  variables = c("B01001_007"),
#  geometry = TRUE,
#  keep_geo_vars = TRUE
#) %>%
#  select(GEOID,
#    stFIPS = STATEFP,
#    coFIPS = COUNTYFP,
#    coNAME = NAME.x,
#    filler = estimate,
#    geometry
#)


COUNTYACSTOTALVOTEPOP <- get_acs(
  geography = "county",
  variables = c("B01003_001", "B01001_003","B01001_004","B01001_005","B01001_006","B01001_027","B01001_028","B01001_029","B01001_030"),
  geometry = TRUE,
  keep_geo_vars=TRUE
) %>%
  select(-moe) %>%
  spread(variable, estimate) %>%
  mutate(TOTALVOTINGPOP=B01003_001-B01001_003-B01001_004-B01001_005-B01001_006-B01001_027-B01001_028-B01001_029-B01001_030) %>%   #Here, we are taking the whole population less the parts of the population that are under 18 years old. We want to get an understanding of the size of the voting population of this area
  select(-B01003_001,-B01001_003,-B01001_004,-B01001_005,-B01001_006,-B01001_027,-B01001_028,-B01001_029,-B01001_030)

COUNTYACSSTRATA<- get_acs(
  geography = "county",
  variables = c("B15001_004","B15001_005","B15001_006","B15001_007","B15001_008","B15001_009","B15001_010","B15001_012","B15001_013","B15001_014","B15001_015","B15001_016","B15001_017","B15001_018","B15001_020","B15001_021","B15001_022","B15001_023","B15001_024","B15001_025","B15001_026","B15001_028","B15001_029","B15001_030","B15001_031","B15001_032","B15001_033","B15001_034","B15001_036","B15001_037","B15001_038","B15001_039","B15001_040","B15001_041","B15001_042","B15001_045","B15001_046","B15001_047","B15001_048","B15001_049","B15001_050","B15001_051","B15001_053","B15001_054","B15001_055","B15001_056","B15001_057","B15001_058","B15001_059","B15001_061","B15001_062","B15001_063","B15001_064","B15001_065","B15001_066","B15001_067","B15001_069","B15001_070","B15001_071","B15001_072","B15001_073","B15001_074","B15001_075","B15001_077","B15001_078","B15001_079","B15001_080","B15001_081","B15001_082","B15001_083"),
  geometry = FALSE
) %>%
  select(-moe) %>%
  spread(variable, estimate)
```

In ACSPART2AGE, we have collected all of the people who are of voting age in the United States. This is collected by a disjoint sample space of the age by sex variable, where we exclude people under 18, because they cannot vote

These have been coming up a little bit strange. Therefore, I want to see the State level measurements of these instead. 



```{r}
metadataStateGIS <- STATEACSTOTALVOTEPOP %>%
  inner_join(STATEACSSTRATAS, by="GEOID") %>%
  filter(STUSPS!="PR") %>%
  select(-NAME.x,-NAME.y)

#metadataCountyGIS <- COUNTYACSTOTALVOTEPOP %>%
#  inner_join(COUNTYACSSTRATA, by="GEOID") %>%
#  select(-NAME.x,-NAME.y)
#This would be useful if we wanted to do county measurements. However, I do not believe that is best moving forward. 

STATECODE<-metadataStateGIS %>% select(STATEFP,NAME,STUSPS)

# Based on our initial measurement, it may be better to use Statewise estimates on preferenes for War. This is especially because our intiial measurement of counties appears to have a smaller initial value. 

#In order to organize variables, it might be valuable to list them here as brackets
# Male, 18-24, less than HS:  004+005
# Male, 18-24, HS Grad: 006
# Male, 18-24, Some College: 007, 008
# Male, 18-24, Bachelor Deg: 009
# Male, 18-24, Grad: 010
# Male, 

```

